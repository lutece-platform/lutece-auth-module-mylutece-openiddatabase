<div id="one-zone-first" class="span-22 prepend-1 append-1 last">
    <div id="one-zone-first-content" class="portlet append-bottom -lutece-border-radius">

    <div class="portlet-background">
    <div class="portlet-background-header">#i18n{module.mylutece.openiddatabase.xpage.create_account.pageTitle}</div>     
    <div class="portlet-background-content">
		
		<#if error_code?has_content >
			<#assign typeClass = "class=\"error\"" />
			
			<#if error_code = "error_mandatory_fields">
				<div class="alert">#i18n{module.mylutece.openiddatabase.message.account.errorMandatoryFields}</div>
				<#if !(user.login?has_content)>
					<#assign classLogin = typeClass />
				</#if>
				<#if !(user.password?has_content)>
					<#assign classPassword = typeClass />
				</#if>
				<#if !(user.confirmation?has_content)>
					<#assign classConfirmation = typeClass />
				</#if>
				<#if !(user.lastName?has_content)>
					<#assign classLastName = typeClass />
				</#if>
				<#if !(user.firstName?has_content)>
					<#assign classFirstName = typeClass />
				</#if>
				<#if !(user.email?has_content)>
					<#assign classEmail = typeClass />
				</#if>
			</#if>
			<#if error_code = "error_confirmation_password">
				<div class="alert">#i18n{module.mylutece.openiddatabase.message.account.errorConfirmation}</div>
				<#assign classPassword = typeClass />
				<#assign classConfirmation = typeClass />
			</#if>
			<#if error_code = "error_login_already_exists">
				<div class="alert">#i18n{module.mylutece.openiddatabase.message.create_account.errorLogin}</div>
				<#assign classLogin = typeClass />
			</#if>
			<#if error_code = "error_syntax_email">
				<div class="alert">#i18n{module.mylutece.openiddatabase.message.account.errorBadEmail}</div>
				<#assign classEmail = typeClass />
			</#if>	
			<#if error_code = "error_captcha">
				<div class="alert">#i18n{module.mylutece.openiddatabase.message.account.errorCaptcha}</div>
			</#if>
		</#if>
		
		<#if action_successful?has_content>
			<h3>#i18n{module.mylutece.openiddatabase.message.create_account.success}</h3>
			<form class="default-form" id="createAccount" name="createAccount" action="${action_successful}" method="post">		
				<table align="center">
	            	<tr>
	                	<td>
							<input type="submit" name="BtnBack" value="#i18n{module.mylutece.openiddatabase.xpage.account.btnBack}" />
						</td>
					</tr>
	            </table>
			</form>
		<#else>
	        <form class="default-form" id="createAccount" name="createAccount" action="jsp/site/plugins/mylutece/modules/openiddatabase/DoCreateAccount.jsp" method="post">
			<input type="hidden" name="plugin_name" value="${plugin_name}" />
				
		        <p>
		            <label class="text-label" for="login">#i18n{module.mylutece.openiddatabase.xpage.create_account.login} * : </label>
		            <input type="text" ${classLogin?if_exists} name="login" maxlength="100" size="35" tabindex="1" value="${(user.login)?if_exists}" />
		            <br />
		            <label class="text-label" for="password">#i18n{module.mylutece.openiddatabase.xpage.create_account.password} * : </label>
		            <input type="password" ${classPassword?if_exists} name="password" maxlength="100" size="35" tabindex="1" value="" />
		            <br />
		            <label class="text-label" for="confirmation">#i18n{module.mylutece.openiddatabase.xpage.create_account.confirmation} * : </label>
		            <input type="password" ${classConfirmation?if_exists} name="confirmation_password" maxlength="100" size="35" tabindex="1" value="" />
		            <br />
		            <label class="text-label" for="last_name">#i18n{module.mylutece.openiddatabase.xpage.create_account.lastName} * : </label>
		            <input type="text" ${classLastName?if_exists} name="last_name" maxlength="100" size="35" tabindex="2"  value="${(user.lastName)?if_exists}" />
		            <br />
		            <label class="text-label" for="first_name">#i18n{module.mylutece.openiddatabase.xpage.create_account.firstName} * : </label>
		            <input type="text" ${classFirstName?if_exists} name="first_name" maxlength="100" size="35" tabindex="3" value="${(user.firstName)?if_exists}" />
		            <br />
		            <label class="text-label" for="email">#i18n{module.mylutece.openiddatabase.xpage.create_account.eMail} * : </label>
		            <input type="text" ${classEmail?if_exists} name="email" maxlength="100" size="35" tabindex="4" value="${(user.email)?if_exists}" />
			        <br />
			        <#if is_active_captcha>
                       <div style="text-align:center;">
                           ${captcha}
                       </div>
                    </#if>
				</p>					
                <table align="center">
                   	<tr>
                       	<td>
							<input type="submit" name="createAccountBtn" value="#i18n{module.mylutece.openiddatabase.xpage.create_account.btnCreateAccount}" />
                        </td>
                        <td>   
							<input type="button" name="back" value="#i18n{module.mylutece.openiddatabase.xpage.account.btnBack}" onclick='javascript:history.go(-1)'/>
       	                </td>
           	        </tr>
               	</table>
			
			</form>
		</#if>
		</div>
		</div>
	</div>
</div>